<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sell on Sanuyo</title>

  <style>
    body { font-family: Arial, sans-serif; margin:0; padding:0; background:#f2f2f2; }
    header {
      background:#5a2dff; padding:15px; text-align:center;
      color:white; font-size:20px; font-weight:bold;
    }
    .container { padding:15px; }
    .category-grid {
      display:grid; grid-template-columns:repeat(3,1fr); gap:12px;
    }
    .category-item {
      background:white; padding:15px; border-radius:10px; text-align:center;
      border:1px solid #ddd; cursor:pointer; transition:0.3s;
    }
    .category-item:hover {
      background:#ece6ff; border-color:#5a2dff;
    }
    .hidden { display:none; }
    .sell-form {
      background:white; padding:15px; border-radius:12px; margin-top:20px;
    }
    input, textarea {
      width:100%; padding:10px; margin:8px 0; border:1px solid #ccc; border-radius:6px;
    }
    button {
      width:100%; padding:12px; background:#5a2dff; color:white;
      border:none; border-radius:6px; font-size:16px; cursor:pointer;
    }
  </style>
</head>

<body>

<header>Sell on Sanuyo</header>

<div class="container">

  <h3>Select a Category</h3>

  <div class="category-grid">
    <div class="category-item" onclick="selectCategory('Phones & Tablets')">üì±<br>Phones</div>
    <div class="category-item" onclick="selectCategory('Electronics')">üîå<br>Electronics</div>
    <div class="category-item" onclick="selectCategory('Fashion')">üëó<br>Fashion</div>
    <div class="category-item" onclick="selectCategory('Vehicles')">üöó<br>Vehicles</div>
    <div class="category-item" onclick="selectCategory('Property')">üè†<br>Property</div>
    <div class="category-item" onclick="selectCategory('Home & Furniture')">üõãÔ∏è<br>Home</div>
    <div class="category-item" onclick="selectCategory('Jobs')">üíº<br>Jobs</div>
    <div class="category-item" onclick="selectCategory('Services')">üõ†Ô∏è<br>Services</div>
    <div class="category-item" onclick="selectCategory('Food')">üçî<br>Food</div>
  </div>

  <div id="sellForm" class="sell-form hidden">
    <h3 id="selectedCategory"></h3>

    <input id="title" type="text" placeholder="Title (e.g. iPhone 12)" />
    <input id="amount" type="number" placeholder="Amount (‚Ç¶)" />
    <textarea id="description" rows="4" placeholder="Description"></textarea>
    <input id="location" type="text" placeholder="Location (e.g. Lagos)" />
    <input id="name" type="text" placeholder="Your Name" />
    <input id="phone" type="text" placeholder="Your Phone Number" />

    <label>Add Images</label>
    <input id="images" type="file" accept="image/*" multiple />

    <button onclick="uploadAd()">Post Ad</button>
  </div>

</div>

<!-- Firebase SDKs -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import { getFirestore, collection, addDoc, serverTimestamp } 
    from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
  import { getStorage, ref, uploadBytes, getDownloadURL } 
    from "https://www.gstatic.com/firebasejs/10.7.1/firebase-storage.js";

  const firebaseConfig = {
    apiKey: "AIzaSyDcSCU5TIout3oQm1ADYISmuf3M1--1JLY",
    authDomain: "sanuyo-website.firebaseapp.com",
    projectId: "sanuyo-website",
    storageBucket: "sanuyo-website.firebasestorage.app",
    messagingSenderId: "765213630366",
    appId: "1:765213630366:web:03279e61a58289b088808f"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);
  const storage = getStorage(app);

  let selectedCategoryValue = "";

  window.selectCategory = function(cat) {
    selectedCategoryValue = cat;
    document.getElementById("selectedCategory").innerText = "Category: " + cat;
    document.getElementById("sellForm").classList.remove("hidden");
  }

  window.uploadAd = async function() {
    const title = document.getElementById("title").value;
    const amount = document.getElementById("amount").value;
    const description = document.getElementById("description").value;
    const location = document.getElementById("location").value;
    const name = document.getElementById("name").value;
    const phone = document.getElementById("phone").value;
    const files = document.getElementById("images").files;

    const imageUrls = [];

    for (let file of files) {
      const storageRef = ref(storage, "ads/" + Date.now() + "_" + file.name);
      await uploadBytes(storageRef, file);
      const url = await getDownloadURL(storageRef);
      imageUrls.push(url);
    }

    await addDoc(collection(db, "ads"), {
      category: selectedCategoryValue,
      title: title,
      amount: amount,
      description: description,
      location: location,
      name: name,
      phone: phone,
      images: imageUrls,
      createdAt: serverTimestamp()
    });

    alert("Ad uploaded successfully!");
  }
</script>

</body>
</html>
